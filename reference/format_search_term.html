<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Format character vectors into search terms for openFDA API queries — format_search_term • openFDA</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/Merriweather-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Format character vectors into search terms for openFDA API queries — format_search_term"><meta name="description" content="This function is a helper for constructing search queries. Whilst it  handles
some of the available formatting for openFDA APIs, it does not recapture all
of the search term syntax available to you. To get a full appreciation of the
openFDA search syntax, see https://open.fda.gov/apis/advanced-syntax/."><meta property="og:description" content="This function is a helper for constructing search queries. Whilst it  handles
some of the available formatting for openFDA APIs, it does not recapture all
of the search term syntax available to you. To get a full appreciation of the
openFDA search syntax, see https://open.fda.gov/apis/advanced-syntax/."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openFDA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openFDA.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/using_openFDA.html">Extracting FDA data with BNF terms</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/simpar1471/openFDA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Format character vectors into <code>search</code> terms for openFDA API queries</h1>
      <small class="dont-index">Source: <a href="https://github.com/simpar1471/openFDA/blob/v0.1.0/R/format_search_term.R" class="external-link"><code>R/format_search_term.R</code></a></small>
      <div class="d-none name"><code>format_search_term.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is a helper for constructing search queries. Whilst it  handles
some of the available formatting for openFDA APIs, it does not recapture all
of the search term syntax available to you. To get a full appreciation of the
openFDA search syntax, see <a href="https://open.fda.gov/apis/advanced-syntax/" class="external-link">https://open.fda.gov/apis/advanced-syntax/</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">format_search_term</span><span class="op">(</span><span class="va">search</span>, exact <span class="op">=</span> <span class="cn">TRUE</span>, mode <span class="op">=</span> <span class="st">"or"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-search">search<a class="anchor" aria-label="anchor" href="#arg-search"></a></dt>
<dd><p>A character vector of length 1 or more. If scalar and unnamed,
it will be assumed that you have already formatted your search string to
work with the API. If named, the vector will be collapsed to include your
various search terms, separated by AND or OR terms based on the value of
<code>operator</code>.</p></dd>


<dt id="arg-exact">exact<a class="anchor" aria-label="anchor" href="#arg-exact"></a></dt>
<dd><p>A single-length logical vector. When <code>TRUE</code> (the default),
individual search terms will be surrounded with double quotes (<code>""</code>). Set
<code>exact</code> to <code>FALSE</code> if your search term contains multiple words to be
searched on, e.g. <code>c("openfda.generic_name" = "losartan+candesartan")</code>.</p>
<p>This parameter only applies if <code>search</code> is a named character vector.</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>A single-length character vector, which defines how searches in
multiple fields should be combined. By default (<code>"or"</code>) they will be
combined with an 'OR' operator, but you can make an 'AND' operator be used
instead (<code>"and"</code>). This argument is case-sensitive and will throw an error
if <code>mode</code> is not one of either <code>"and"</code> or <code>"or"</code>.</p>
<p>This parameter only applies if <code>search</code> is a named character vector.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector of the S3 class <code>&lt;AsIS&gt;</code>, with a formatted search
term which can be supplied to <code><a href="openFDA.html">openFDA()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function does not check that you're providing accurate field names or
search terms. It is up to you to make sure you've provided correctly spelt
fields and search terms.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="format_sort_term.html">format_sort_term()</a></code> performs similar formatting for the <code>sort</code> component
of an openFDA query.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I()</a></code> generates vectors with the <code>&lt;AsIs&gt;</code> S3 class.</p></li>
<li><p><code><a href="https://httr2.r-lib.org/reference/req_url.html" class="external-link">httr2::req_url()</a></code> documents why <code><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I()</a></code> is applied to the output of this
function.</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Provide a formatted search string and the function will do no formatting</span></span></span>
<span class="r-in"><span><span class="fu">format_search_term</span><span class="op">(</span><span class="st">"openfda.generic_name:verapamil"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "openfda.generic_name:verapamil"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Provide a named vector and the function will format it for you</span></span></span>
<span class="r-in"><span><span class="fu">format_search_term</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"openfda.generic_name"</span> <span class="op">=</span> <span class="st">"verapamil"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "openfda.generic_name:%22verapamil%22"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If providing multiple elements in your search term, use `exact = FALSE`</span></span></span>
<span class="r-in"><span><span class="co"># to prevent the function from surrounding the term with double quotes.</span></span></span>
<span class="r-in"><span><span class="fu">format_search_term</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"openfda.generic_name"</span> <span class="op">=</span> <span class="st">"verapamil+amlodipine"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   exact <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "openfda.generic_name:verapamil+amlodipine"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Provide a longer named vector and function will merge these with an OR</span></span></span>
<span class="r-in"><span><span class="co"># operator</span></span></span>
<span class="r-in"><span><span class="fu">format_search_term</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"openfda.generic_name"</span> <span class="op">=</span> <span class="st">"verapamil"</span>,</span></span>
<span class="r-in"><span>                     <span class="st">"openfda.manufacturer_name"</span> <span class="op">=</span> <span class="st">"glaxo*"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "openfda.generic_name:%22verapamil%22+openfda.manufacturer_name:%22glaxo%2A%22"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or you can set the `mode` argument to merge your search terms with an AND</span></span></span>
<span class="r-in"><span><span class="co"># operator</span></span></span>
<span class="r-in"><span><span class="fu">format_search_term</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"openfda.generic_name"</span> <span class="op">=</span> <span class="st">"verapamil"</span>,</span></span>
<span class="r-in"><span>                     <span class="st">"openfda.manufacturer_name"</span> <span class="op">=</span> <span class="st">"glaxo*"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   mode <span class="op">=</span> <span class="st">"and"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "openfda.generic_name:%22verapamil%22+AND+openfda.manufacturer_name:%22glaxo%2A%22"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Simon Parker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

