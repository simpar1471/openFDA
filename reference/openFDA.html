<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Send requests to the openFDA API — openFDA • openFDA</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/Merriweather-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Send requests to the openFDA API — openFDA"><meta name="description" content="Send requests to the openFDA API"><meta property="og:description" content="Send requests to the openFDA API"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openFDA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openFDA.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/using_openFDA.html">Extracting FDA data with BNF terms</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/simpar1471/openFDA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Send requests to the openFDA API</h1>
      <small class="dont-index">Source: <a href="https://github.com/simpar1471/openFDA/blob/main/R/openFDA.R" class="external-link"><code>R/openFDA.R</code></a></small>
      <div class="d-none name"><code>openFDA.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Send requests to the openFDA API</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">openFDA</span><span class="op">(</span></span>
<span>  search <span class="op">=</span> <span class="st">""</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  count <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  skip <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  endpoint <span class="op">=</span> <span class="st">"drug-drugsfda"</span>,</span>
<span>  api_key <span class="op">=</span> <span class="fu"><a href="api_key.html">get_api_key</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  warn_on_http_error <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-search">search<a class="anchor" aria-label="anchor" href="#arg-search"></a></dt>
<dd><p>A character vector which will be passed to
<code><a href="format_search_term.html">format_search_term()</a></code>. If search is <code>""</code> (the default), openFDA will
retrieve all records with no filtering. An error will be thrown if any
elements of <code>search</code> are missing (<code>NA</code>).</p></dd>


<dt id="arg-sort">sort<a class="anchor" aria-label="anchor" href="#arg-sort"></a></dt>
<dd><p>A single string or scalar named character vector describing how
to sort the results. The <code>sort</code> term should either be formatted as
<code>"[FIELD]:[asc/desc]"</code>, or <code>c("[FIELD]" = "[asc/desc]")</code>. For example, to
sort results in the Drugs@FDA endpoint by ascending submission status
dates. If values other than <code>"asc"</code>, or <code>"desc"</code> are supplied, the function
will throw an error.</p></dd>


<dt id="arg-count">count<a class="anchor" aria-label="anchor" href="#arg-count"></a></dt>
<dd><p>A single string denoting a field on which to count results. If
<code>NULL</code> (the default), results will be returned in full to the user. Specify
this parameter if you want to count occurrences of results within your
search term - go to <a href="https://open.fda.gov/apis/query-syntax/" class="external-link">https://open.fda.gov/apis/query-syntax/</a> for more
information.</p></dd>


<dt id="arg-limit">limit<a class="anchor" aria-label="anchor" href="#arg-limit"></a></dt>
<dd><p>A single integerish value describing the limit on the number of
records to retrieve. An error will be thrown if <code>limit</code> is more than <code>1000</code>
(the default).</p></dd>


<dt id="arg-skip">skip<a class="anchor" aria-label="anchor" href="#arg-skip"></a></dt>
<dd><p>A single integer describing how many records should be skipped.
If more records are skipped than are found in your search, the openFDA
API will return a 404 error.</p></dd>


<dt id="arg-endpoint">endpoint<a class="anchor" aria-label="anchor" href="#arg-endpoint"></a></dt>
<dd><p>A single-length character vector describing which openFDA
endpoint to target.</p><ul><li><p><code>"animal-event"</code>: Adverse event reports for animal/veterinary drugs.</p></li>
<li><p><code>"drug-event"</code>: Adverse event reports from <a href="https://open.fda.gov/data/faers/" class="external-link">FDA Adverse Event Reporting System</a></p></li>
<li><p><code>"drug-label"</code>: Drug documentation in the <a href="https://www.fda.gov/industry/fda-data-standards-advisory-board/structured-product-labeling-resources" class="external-link">Structured Product Labeling</a>
(SPL) format.</p></li>
<li><p><code>"drug-ndc"</code>: Data from the <a href="https://open.fda.gov/data/ndc/" class="external-link">National Drug Code Directory</a> (NDC).</p></li>
<li><p><code>"drug-enforcement"</code>: Data from the <a href="https://open.fda.gov/data/res/" class="external-link">FDA Recall Enterprise System</a> about drug products.</p></li>
<li><p><code>"drug-drugsfda"</code>: Data on products approved for human use by the FDA
since 1939, with mostly complete data after 1998.</p></li>
<li><p><code>"device-510k"</code>: Data from 510(k) submissions to the FDA regarding
medical devices.</p></li>
<li><p><code>"device-classification"</code>: Data from the FDA <a href="https://open.fda.gov/data/product-classification/" class="external-link">Product Classification Database</a> for medical
devices.</p></li>
<li><p><code>"device-enforcement"</code>: Data from the <a href="https://open.fda.gov/data/res/" class="external-link">FDA Recall Enterprise System</a> (RES) for medical devices.</p></li>
<li><p><code>"device-event"</code>: Data on adverse events associated with FDA-approved
medical devices.</p></li>
<li><p><code>"device-pma"</code>: Pre-market approval data for medical devices submitted to
the FDA.</p></li>
<li><p><code>"device-recall"</code>: Data on product recalls for medical devices which
violate FDA law.</p></li>
<li><p><code>"device-reglist"</code>: Data on FDA <a href="https://www.fda.gov/medical-devices/how-study-and-market-your-device/device-registration-and-listing" class="external-link">Device Registrations and Listings</a>.</p></li>
<li><p><code>"device-covid19serology"</code>: Data from <a href="https://open.fda.gov/apis/device/covid19serology/" class="external-link">independent evaluations of COVID-19 serological tests</a>.</p></li>
<li><p><code>"device-udi"</code>: Data from the FDA's Global Unique Device Identification
Database (GUDID).</p></li>
<li><p><code>"food-enforcement"</code>: Data from the <a href="https://open.fda.gov/data/res/" class="external-link">FDA Recall Enterprise System</a> for food products.</p></li>
<li><p><code>"food-event"</code>: Data from the <a href="https://open.fda.gov/data/caers/" class="external-link">Center for Food Safety and Applied Nutrition Adverse Event Reporting System</a>.</p></li>
<li><p><code>"other-historicaldocument"</code>: The majority of FDA Press Releases, from
1913 to 2014.</p></li>
<li><p><code>"other-nsde"</code>: Data from the <a href="https://www.fda.gov/industry/structured-product-labeling-resources/nsde" class="external-link">National Drug Code Structured Product Labeling Data Elements</a>.</p></li>
<li><p><code>"other-substance"</code>: Data regarding substances - individual molecules,
proteins, nucleic acids, and more.</p></li>
<li><p><code>"other-unii"</code>: Data from the <a href="https://www.fda.gov/industry/fda-data-standards-advisory-board/fdas-global-substance-registration-system" class="external-link">FDA's Global Substance Registration System</a>.</p></li>
<li><p><code>"tobacco-problem"</code>: Data on problems (e.g. damage, defects,
contamination, bad smell) with tobacco products.</p></li>
</ul><p>This argument is case-sensitive. By default, the package will target the
Drugs@FDA endpoint (<code>"drugs-drugsfda"</code>).</p></dd>


<dt id="arg-api-key">api_key<a class="anchor" aria-label="anchor" href="#arg-api-key"></a></dt>
<dd><p>A single-length character vector with your openFDA API key.
By default this is the result of <code><a href="api_key.html">get_api_key()</a></code>. If <code>api_key</code> is an empty
string, an error will be thrown.</p></dd>


<dt id="arg-warn-on-http-error">warn_on_http_error<a class="anchor" aria-label="anchor" href="#arg-warn-on-http-error"></a></dt>
<dd><p>A scalar logical value.  If <code>TRUE</code> (the default),
common openFDA HTTP errors will cause explanatory warnings to be printed
If <code>FALSE</code>, the underlying httr2 response object will be returned with
no extra warnings.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>httr2</code> response object from <code><a href="https://httr2.r-lib.org/reference/req_perform.html" class="external-link">httr2::req_perform()</a></code>. You can use
<code><a href="https://httr2.r-lib.org/reference/resp_body_raw.html" class="external-link">httr2::resp_body_json()</a></code> to extract JSON data from the response.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Kass-Hout TA, Xu Z, Mohebbi M, Nelsen H, Baker A, LEvine J, Johansen E,
Bright RA. <strong>OpenFDA: an innovative platform providing access to a wealth of
FDA's publicly available data</strong> <em>J Am Med Inform Assoc</em> 2016,
<strong>23(3):596-600.</strong> <a href="https://doi.org/10.1093/jamia/ocv153" class="external-link">doi:10.1093/jamia/ocv153</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="format_search_term.html">format_search_term()</a></code> documents how input <code>search</code> vectors are
converted to openFDA API searches.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/secrets.html" class="external-link">secret_has_key</a></span><span class="op">(</span><span class="st">"OPENFDA_KEY"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="api_key.html">set_api_key</a></span><span class="op">(</span><span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/secrets.html" class="external-link">secret_decrypt</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"TEaDtqdFMq9_Montij5p9IY6T57IyqkbF8IYFVOpk-ttxotFUNdJSxgccAnkq4nQhplaf-r3deQ"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"OPENFDA_KEY"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">resp</span> <span class="op">&lt;-</span> <span class="fu">openFDA</span><span class="op">(</span>search <span class="op">=</span> <span class="st">"openfda.manufacturer_name:gilead*"</span>,</span></span>
<span class="r-in"><span>                  limit <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                  skip <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># The function returns an `httr2` object</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">&lt;httr2_response&gt;</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">GET</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> https://api.fda.gov/drug/drugsfda.json?api_key=[API_KEY]&amp;search=openfda.manufacturer_name:gilead%2A&amp;limit=2&amp;skip=10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Status</span>: 200 OK</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Content-Type</span>: application/json</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Body</span>: In memory (45149 bytes)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bad inputs will cause informative errors - here, a bad API key is supplied</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">openFDA</span><span class="op">(</span>search <span class="op">=</span> <span class="st">"openfda.manufacturer_name:gilead*"</span>,</span></span>
<span class="r-in"><span>          api_key <span class="op">=</span> <span class="st">"BAD_API_KEY"</span>,</span></span>
<span class="r-in"><span>          limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The openFDA API returned a 403 error.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> This usually means that an invalid `api_key` was used.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Your API key was <span style="color: #0000BB;">"BAD_API_KEY"</span>.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">&lt;httr2_response&gt;</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">GET</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> https://api.fda.gov/drug/drugsfda.json?api_key=[API_KEY]&amp;search=openfda.manufacturer_name:gilead%2A&amp;limit=1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Status</span>: 403 Forbidden</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Content-Type</span>: application/json</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">Body</span>: In memory (136 bytes)</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Simon Parker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

